"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/files/route";
exports.ids = ["app/api/files/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ffiles%2Froute&page=%2Fapi%2Ffiles%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ffiles%2Froute.ts&appDir=D%3A%5CNeuroLearn%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CNeuroLearn&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ffiles%2Froute&page=%2Fapi%2Ffiles%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ffiles%2Froute.ts&appDir=D%3A%5CNeuroLearn%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CNeuroLearn&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var D_NeuroLearn_src_app_api_files_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/files/route.ts */ \"(rsc)/./src/app/api/files/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/files/route\",\n        pathname: \"/api/files\",\n        filename: \"route\",\n        bundlePath: \"app/api/files/route\"\n    },\n    resolvedPagePath: \"D:\\\\NeuroLearn\\\\src\\\\app\\\\api\\\\files\\\\route.ts\",\n    nextConfigOutput,\n    userland: D_NeuroLearn_src_app_api_files_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/files/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZmaWxlcyUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGZmlsZXMlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZmaWxlcyUyRnJvdXRlLnRzJmFwcERpcj1EJTNBJTVDTmV1cm9MZWFybiU1Q3NyYyU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9RCUzQSU1Q05ldXJvTGVhcm4maXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ0Y7QUFDM0U7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXVyb2xlYXJuLz9kZTk0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkQ6XFxcXE5ldXJvTGVhcm5cXFxcc3JjXFxcXGFwcFxcXFxhcGlcXFxcZmlsZXNcXFxccm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2ZpbGVzL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvZmlsZXNcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2ZpbGVzL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiRDpcXFxcTmV1cm9MZWFyblxcXFxzcmNcXFxcYXBwXFxcXGFwaVxcXFxmaWxlc1xcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvZmlsZXMvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ffiles%2Froute&page=%2Fapi%2Ffiles%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ffiles%2Froute.ts&appDir=D%3A%5CNeuroLearn%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CNeuroLearn&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/files/route.ts":
/*!************************************!*\
  !*** ./src/app/api/files/route.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DELETE: () => (/* binding */ DELETE),\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n/* harmony import */ var mammoth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! mammoth */ \"(rsc)/./node_modules/mammoth/lib/index.js\");\n\n\n\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_2__.createClient)(\"https://cgryfltmvaplsrawoktj.supabase.co\", process.env.SUPABASE_SERVICE_ROLE_KEY);\nasync function GET(request) {\n    try {\n        console.log(\"GET /api/files - Starting request\");\n        const { searchParams } = new URL(request.url);\n        const notebookId = searchParams.get(\"notebookId\");\n        console.log(\"Notebook ID:\", notebookId);\n        if (!notebookId) {\n            console.log(\"No notebook ID provided\");\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Notebook ID is required\"\n            }, {\n                status: 400\n            });\n        }\n        console.log(\"Querying files for notebook:\", notebookId);\n        const { data: files, error } = await supabase.from(\"notebook_files\").select(`\n        files (\n          id,\n          filename,\n          file_type,\n          file_size,\n          content,\n          created_at\n        )\n      `).eq(\"notebook_id\", notebookId).order(\"created_at\", {\n            ascending: false\n        });\n        if (error) {\n            console.error(\"Database error:\", error);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Failed to fetch files\"\n            }, {\n                status: 500\n            });\n        }\n        // Extract files from the junction table result\n        const filesList = files?.map((item)=>item.files).filter(Boolean) || [];\n        console.log(\"Files found:\", filesList.length);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            files: filesList\n        });\n    } catch (error) {\n        console.error(\"GET /api/files error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Internal server error\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function DELETE(request) {\n    try {\n        const { searchParams } = new URL(request.url);\n        const fileId = searchParams.get(\"fileId\");\n        if (!fileId) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"File ID is required\"\n            }, {\n                status: 400\n            });\n        }\n        // Delete from notebook_files junction table first\n        const { error: junctionError } = await supabase.from(\"notebook_files\").delete().eq(\"file_id\", fileId);\n        if (junctionError) {\n            console.error(\"Error deleting from notebook_files:\", junctionError);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Failed to delete file association\"\n            }, {\n                status: 500\n            });\n        }\n        // Delete from files table\n        const { error: fileError } = await supabase.from(\"files\").delete().eq(\"id\", fileId);\n        if (fileError) {\n            console.error(\"Error deleting file:\", fileError);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Failed to delete file\"\n            }, {\n                status: 500\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            message: \"File deleted successfully\"\n        });\n    } catch (error) {\n        console.error(\"DELETE /api/files error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Internal server error\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function POST(request) {\n    try {\n        console.log(\"POST /api/files called\");\n        const formData = await request.formData();\n        const file = formData.get(\"file\");\n        const notebookId = formData.get(\"notebookId\");\n        console.log(\"File:\", file?.name, \"Size:\", file?.size, \"Type:\", file?.type);\n        console.log(\"Notebook ID:\", notebookId);\n        if (!file) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"No file provided\"\n            }, {\n                status: 400\n            });\n        }\n        if (!notebookId) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Notebook ID is required\"\n            }, {\n                status: 400\n            });\n        }\n        // Extract text content based on file type\n        const bytes = await file.arrayBuffer();\n        let textContent = \"\";\n        try {\n            if (file.type === \"text/plain\") {\n                // Extract text from plain text files\n                textContent = new TextDecoder().decode(bytes);\n                console.log(`Extracted ${textContent.length} characters from text file`);\n            } else if (file.type === \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\" || file.name.endsWith(\".docx\")) {\n                // Extract text from DOCX files using mammoth\n                const buffer = Buffer.from(bytes);\n                const result = await mammoth__WEBPACK_IMPORTED_MODULE_1__.extractRawText({\n                    buffer\n                });\n                textContent = result.value;\n                console.log(`Extracted ${textContent.length} characters from DOCX file`);\n                if (result.messages.length > 0) {\n                    console.log(\"Mammoth messages:\", result.messages);\n                }\n            } else {\n                // For other file types, store basic info for now\n                textContent = `File: ${file.name} (${file.type}) - Content extraction not yet implemented for this file type`;\n                console.log(`Basic info stored for ${file.type} file`);\n            }\n        } catch (extractionError) {\n            console.error(\"Text extraction error:\", extractionError);\n            textContent = `File: ${file.name} - Error during content extraction: ${extractionError instanceof Error ? extractionError.message : \"Unknown error\"}`;\n        }\n        // Insert file record\n        const { data: fileRecord, error: fileError } = await supabase.from(\"files\").insert({\n            filename: file.name,\n            file_type: (file.type || \"application/octet-stream\").substring(0, 50),\n            file_size: file.size,\n            content: textContent\n        }).select().single();\n        if (fileError) {\n            console.error(\"Database error:\", fileError);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Failed to save file\"\n            }, {\n                status: 500\n            });\n        }\n        // Link file to notebook\n        const { error: linkError } = await supabase.from(\"notebook_files\").insert({\n            notebook_id: notebookId,\n            file_id: fileRecord.id\n        });\n        if (linkError) {\n            console.error(\"Link error:\", linkError);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Failed to link file to notebook\"\n            }, {\n                status: 500\n            });\n        }\n        console.log(`File ${file.name} successfully processed and stored with ID: ${fileRecord.id}`);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            message: \"File processed and stored successfully\",\n            file: {\n                id: fileRecord.id,\n                name: file.name,\n                type: file.type,\n                size: file.size,\n                extractedLength: textContent.length,\n                preview: textContent.substring(0, 200) + (textContent.length > 200 ? \"...\" : \"\"),\n                notebookId: notebookId\n            }\n        });\n    } catch (error) {\n        console.error(\"Upload error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to process file\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNGO0lBRUYsRUFBRSxPQUFPRyxPQUFPO1FBQ2RSLFFBQVFRLEtBQUssQ0FBQyxpQkFBaUJBO1FBQy9CLE9BQU9sQixxREFBWUEsQ0FBQ2lCLElBQUksQ0FDdEI7WUFBRUMsT0FBTztRQUF5QixHQUNsQztZQUFFQyxRQUFRO1FBQUk7SUFFbEI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL25ldXJvbGVhcm4vLi9zcmMvYXBwL2FwaS9maWxlcy9yb3V0ZS50cz9mNTg0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XG5pbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tICdAc3VwYWJhc2Uvc3VwYWJhc2UtanMnO1xuaW1wb3J0IG1hbW1vdGggZnJvbSAnbWFtbW90aCc7XG5cbmNvbnN0IHN1cGFiYXNlID0gY3JlYXRlQ2xpZW50KFxuICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwhLFxuICBwcm9jZXNzLmVudi5TVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZIVxuKTtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKCdHRVQgL2FwaS9maWxlcyAtIFN0YXJ0aW5nIHJlcXVlc3QnKTtcbiAgICBjb25zdCB7IHNlYXJjaFBhcmFtcyB9ID0gbmV3IFVSTChyZXF1ZXN0LnVybCk7XG4gICAgY29uc3Qgbm90ZWJvb2tJZCA9IHNlYXJjaFBhcmFtcy5nZXQoJ25vdGVib29rSWQnKTtcbiAgICBcbiAgICBjb25zb2xlLmxvZygnTm90ZWJvb2sgSUQ6Jywgbm90ZWJvb2tJZCk7XG4gICAgXG4gICAgaWYgKCFub3RlYm9va0lkKSB7XG4gICAgICBjb25zb2xlLmxvZygnTm8gbm90ZWJvb2sgSUQgcHJvdmlkZWQnKTtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnTm90ZWJvb2sgSUQgaXMgcmVxdWlyZWQnIH0sIHsgc3RhdHVzOiA0MDAgfSk7XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coJ1F1ZXJ5aW5nIGZpbGVzIGZvciBub3RlYm9vazonLCBub3RlYm9va0lkKTtcbiAgICBjb25zdCB7IGRhdGE6IGZpbGVzLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdub3RlYm9va19maWxlcycpXG4gICAgICAuc2VsZWN0KGBcbiAgICAgICAgZmlsZXMgKFxuICAgICAgICAgIGlkLFxuICAgICAgICAgIGZpbGVuYW1lLFxuICAgICAgICAgIGZpbGVfdHlwZSxcbiAgICAgICAgICBmaWxlX3NpemUsXG4gICAgICAgICAgY29udGVudCxcbiAgICAgICAgICBjcmVhdGVkX2F0XG4gICAgICAgIClcbiAgICAgIGApXG4gICAgICAuZXEoJ25vdGVib29rX2lkJywgbm90ZWJvb2tJZClcbiAgICAgIC5vcmRlcignY3JlYXRlZF9hdCcsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KTtcblxuICAgIGlmIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRGF0YWJhc2UgZXJyb3I6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdGYWlsZWQgdG8gZmV0Y2ggZmlsZXMnIH0sIHsgc3RhdHVzOiA1MDAgfSk7XG4gICAgfVxuXG4gICAgLy8gRXh0cmFjdCBmaWxlcyBmcm9tIHRoZSBqdW5jdGlvbiB0YWJsZSByZXN1bHRcbiAgICBjb25zdCBmaWxlc0xpc3QgPSBmaWxlcz8ubWFwKGl0ZW0gPT4gaXRlbS5maWxlcykuZmlsdGVyKEJvb2xlYW4pIHx8IFtdO1xuICAgIGNvbnNvbGUubG9nKCdGaWxlcyBmb3VuZDonLCBmaWxlc0xpc3QubGVuZ3RoKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBmaWxlczogZmlsZXNMaXN0IH0pO1xuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignR0VUIC9hcGkvZmlsZXMgZXJyb3I6JywgZXJyb3IpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyB9LCB7IHN0YXR1czogNTAwIH0pO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBERUxFVEUocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IHNlYXJjaFBhcmFtcyB9ID0gbmV3IFVSTChyZXF1ZXN0LnVybCk7XG4gICAgY29uc3QgZmlsZUlkID0gc2VhcmNoUGFyYW1zLmdldCgnZmlsZUlkJyk7XG4gICAgXG4gICAgaWYgKCFmaWxlSWQpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnRmlsZSBJRCBpcyByZXF1aXJlZCcgfSwgeyBzdGF0dXM6IDQwMCB9KTtcbiAgICB9XG5cbiAgICAvLyBEZWxldGUgZnJvbSBub3RlYm9va19maWxlcyBqdW5jdGlvbiB0YWJsZSBmaXJzdFxuICAgIGNvbnN0IHsgZXJyb3I6IGp1bmN0aW9uRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgnbm90ZWJvb2tfZmlsZXMnKVxuICAgICAgLmRlbGV0ZSgpXG4gICAgICAuZXEoJ2ZpbGVfaWQnLCBmaWxlSWQpO1xuXG4gICAgaWYgKGp1bmN0aW9uRXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIGZyb20gbm90ZWJvb2tfZmlsZXM6JywganVuY3Rpb25FcnJvcik7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ0ZhaWxlZCB0byBkZWxldGUgZmlsZSBhc3NvY2lhdGlvbicgfSwgeyBzdGF0dXM6IDUwMCB9KTtcbiAgICB9XG5cbiAgICAvLyBEZWxldGUgZnJvbSBmaWxlcyB0YWJsZVxuICAgIGNvbnN0IHsgZXJyb3I6IGZpbGVFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdmaWxlcycpXG4gICAgICAuZGVsZXRlKClcbiAgICAgIC5lcSgnaWQnLCBmaWxlSWQpO1xuXG4gICAgaWYgKGZpbGVFcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZGVsZXRpbmcgZmlsZTonLCBmaWxlRXJyb3IpO1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdGYWlsZWQgdG8gZGVsZXRlIGZpbGUnIH0sIHsgc3RhdHVzOiA1MDAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgbWVzc2FnZTogJ0ZpbGUgZGVsZXRlZCBzdWNjZXNzZnVsbHknIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0RFTEVURSAvYXBpL2ZpbGVzIGVycm9yOicsIGVycm9yKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ0ludGVybmFsIHNlcnZlciBlcnJvcicgfSwgeyBzdGF0dXM6IDUwMCB9KTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKCdQT1NUIC9hcGkvZmlsZXMgY2FsbGVkJyk7XG4gICAgY29uc3QgZm9ybURhdGEgPSBhd2FpdCByZXF1ZXN0LmZvcm1EYXRhKCk7XG4gICAgY29uc3QgZmlsZSA9IGZvcm1EYXRhLmdldCgnZmlsZScpIGFzIEZpbGU7XG4gICAgY29uc3Qgbm90ZWJvb2tJZCA9IGZvcm1EYXRhLmdldCgnbm90ZWJvb2tJZCcpIGFzIHN0cmluZztcblxuICAgIGNvbnNvbGUubG9nKCdGaWxlOicsIGZpbGU/Lm5hbWUsICdTaXplOicsIGZpbGU/LnNpemUsICdUeXBlOicsIGZpbGU/LnR5cGUpO1xuICAgIGNvbnNvbGUubG9nKCdOb3RlYm9vayBJRDonLCBub3RlYm9va0lkKTtcblxuICAgIGlmICghZmlsZSkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiAnTm8gZmlsZSBwcm92aWRlZCcgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICApO1xuICAgIH1cblxuICAgIGlmICghbm90ZWJvb2tJZCkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiAnTm90ZWJvb2sgSUQgaXMgcmVxdWlyZWQnIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBFeHRyYWN0IHRleHQgY29udGVudCBiYXNlZCBvbiBmaWxlIHR5cGVcbiAgICBjb25zdCBieXRlcyA9IGF3YWl0IGZpbGUuYXJyYXlCdWZmZXIoKTtcbiAgICBsZXQgdGV4dENvbnRlbnQgPSAnJztcbiAgICBcbiAgICB0cnkge1xuICAgICAgaWYgKGZpbGUudHlwZSA9PT0gJ3RleHQvcGxhaW4nKSB7XG4gICAgICAgIC8vIEV4dHJhY3QgdGV4dCBmcm9tIHBsYWluIHRleHQgZmlsZXNcbiAgICAgICAgdGV4dENvbnRlbnQgPSBuZXcgVGV4dERlY29kZXIoKS5kZWNvZGUoYnl0ZXMpO1xuICAgICAgICBjb25zb2xlLmxvZyhgRXh0cmFjdGVkICR7dGV4dENvbnRlbnQubGVuZ3RofSBjaGFyYWN0ZXJzIGZyb20gdGV4dCBmaWxlYCk7XG4gICAgICB9IGVsc2UgaWYgKGZpbGUudHlwZSA9PT0gJ2FwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC53b3JkcHJvY2Vzc2luZ21sLmRvY3VtZW50JyB8fCBmaWxlLm5hbWUuZW5kc1dpdGgoJy5kb2N4JykpIHtcbiAgICAgICAgLy8gRXh0cmFjdCB0ZXh0IGZyb20gRE9DWCBmaWxlcyB1c2luZyBtYW1tb3RoXG4gICAgICAgIGNvbnN0IGJ1ZmZlciA9IEJ1ZmZlci5mcm9tKGJ5dGVzKTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgbWFtbW90aC5leHRyYWN0UmF3VGV4dCh7IGJ1ZmZlciB9KTtcbiAgICAgICAgdGV4dENvbnRlbnQgPSByZXN1bHQudmFsdWU7XG4gICAgICAgIGNvbnNvbGUubG9nKGBFeHRyYWN0ZWQgJHt0ZXh0Q29udGVudC5sZW5ndGh9IGNoYXJhY3RlcnMgZnJvbSBET0NYIGZpbGVgKTtcbiAgICAgICAgaWYgKHJlc3VsdC5tZXNzYWdlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ01hbW1vdGggbWVzc2FnZXM6JywgcmVzdWx0Lm1lc3NhZ2VzKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gRm9yIG90aGVyIGZpbGUgdHlwZXMsIHN0b3JlIGJhc2ljIGluZm8gZm9yIG5vd1xuICAgICAgICB0ZXh0Q29udGVudCA9IGBGaWxlOiAke2ZpbGUubmFtZX0gKCR7ZmlsZS50eXBlfSkgLSBDb250ZW50IGV4dHJhY3Rpb24gbm90IHlldCBpbXBsZW1lbnRlZCBmb3IgdGhpcyBmaWxlIHR5cGVgO1xuICAgICAgICBjb25zb2xlLmxvZyhgQmFzaWMgaW5mbyBzdG9yZWQgZm9yICR7ZmlsZS50eXBlfSBmaWxlYCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXh0cmFjdGlvbkVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdUZXh0IGV4dHJhY3Rpb24gZXJyb3I6JywgZXh0cmFjdGlvbkVycm9yKTtcbiAgICAgIHRleHRDb250ZW50ID0gYEZpbGU6ICR7ZmlsZS5uYW1lfSAtIEVycm9yIGR1cmluZyBjb250ZW50IGV4dHJhY3Rpb246ICR7ZXh0cmFjdGlvbkVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBleHRyYWN0aW9uRXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gO1xuICAgIH1cblxuICAgIC8vIEluc2VydCBmaWxlIHJlY29yZFxuICAgIGNvbnN0IHsgZGF0YTogZmlsZVJlY29yZCwgZXJyb3I6IGZpbGVFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdmaWxlcycpXG4gICAgICAuaW5zZXJ0KHtcbiAgICAgICAgZmlsZW5hbWU6IGZpbGUubmFtZSxcbiAgICAgICAgZmlsZV90eXBlOiAoZmlsZS50eXBlIHx8ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nKS5zdWJzdHJpbmcoMCwgNTApLFxuICAgICAgICBmaWxlX3NpemU6IGZpbGUuc2l6ZSxcbiAgICAgICAgY29udGVudDogdGV4dENvbnRlbnRcbiAgICAgIH0pXG4gICAgICAuc2VsZWN0KClcbiAgICAgIC5zaW5nbGUoKTtcblxuICAgIGlmIChmaWxlRXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0RhdGFiYXNlIGVycm9yOicsIGZpbGVFcnJvcik7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ0ZhaWxlZCB0byBzYXZlIGZpbGUnIH0sIHsgc3RhdHVzOiA1MDAgfSk7XG4gICAgfVxuXG4gICAgLy8gTGluayBmaWxlIHRvIG5vdGVib29rXG4gICAgY29uc3QgeyBlcnJvcjogbGlua0Vycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ25vdGVib29rX2ZpbGVzJylcbiAgICAgIC5pbnNlcnQoe1xuICAgICAgICBub3RlYm9va19pZDogbm90ZWJvb2tJZCxcbiAgICAgICAgZmlsZV9pZDogZmlsZVJlY29yZC5pZFxuICAgICAgfSk7XG5cbiAgICBpZiAobGlua0Vycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdMaW5rIGVycm9yOicsIGxpbmtFcnJvcik7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ0ZhaWxlZCB0byBsaW5rIGZpbGUgdG8gbm90ZWJvb2snIH0sIHsgc3RhdHVzOiA1MDAgfSk7XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coYEZpbGUgJHtmaWxlLm5hbWV9IHN1Y2Nlc3NmdWxseSBwcm9jZXNzZWQgYW5kIHN0b3JlZCB3aXRoIElEOiAke2ZpbGVSZWNvcmQuaWR9YCk7XG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgbWVzc2FnZTogJ0ZpbGUgcHJvY2Vzc2VkIGFuZCBzdG9yZWQgc3VjY2Vzc2Z1bGx5JyxcbiAgICAgIGZpbGU6IHtcbiAgICAgICAgaWQ6IGZpbGVSZWNvcmQuaWQsXG4gICAgICAgIG5hbWU6IGZpbGUubmFtZSxcbiAgICAgICAgdHlwZTogZmlsZS50eXBlLFxuICAgICAgICBzaXplOiBmaWxlLnNpemUsXG4gICAgICAgIGV4dHJhY3RlZExlbmd0aDogdGV4dENvbnRlbnQubGVuZ3RoLFxuICAgICAgICBwcmV2aWV3OiB0ZXh0Q29udGVudC5zdWJzdHJpbmcoMCwgMjAwKSArICh0ZXh0Q29udGVudC5sZW5ndGggPiAyMDAgPyAnLi4uJyA6ICcnKSxcbiAgICAgICAgbm90ZWJvb2tJZDogbm90ZWJvb2tJZFxuICAgICAgfVxuICAgIH0pO1xuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignVXBsb2FkIGVycm9yOicsIGVycm9yKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IGVycm9yOiAnRmFpbGVkIHRvIHByb2Nlc3MgZmlsZScgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICk7XG4gIH1cbn0iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiY3JlYXRlQ2xpZW50IiwibWFtbW90aCIsInN1cGFiYXNlIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsIlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVkiLCJHRVQiLCJyZXF1ZXN0IiwiY29uc29sZSIsImxvZyIsInNlYXJjaFBhcmFtcyIsIlVSTCIsInVybCIsIm5vdGVib29rSWQiLCJnZXQiLCJqc29uIiwiZXJyb3IiLCJzdGF0dXMiLCJkYXRhIiwiZmlsZXMiLCJmcm9tIiwic2VsZWN0IiwiZXEiLCJvcmRlciIsImFzY2VuZGluZyIsImZpbGVzTGlzdCIsIm1hcCIsIml0ZW0iLCJmaWx0ZXIiLCJCb29sZWFuIiwibGVuZ3RoIiwiREVMRVRFIiwiZmlsZUlkIiwianVuY3Rpb25FcnJvciIsImRlbGV0ZSIsImZpbGVFcnJvciIsIm1lc3NhZ2UiLCJQT1NUIiwiZm9ybURhdGEiLCJmaWxlIiwibmFtZSIsInNpemUiLCJ0eXBlIiwiYnl0ZXMiLCJhcnJheUJ1ZmZlciIsInRleHRDb250ZW50IiwiVGV4dERlY29kZXIiLCJkZWNvZGUiLCJlbmRzV2l0aCIsImJ1ZmZlciIsIkJ1ZmZlciIsInJlc3VsdCIsImV4dHJhY3RSYXdUZXh0IiwidmFsdWUiLCJtZXNzYWdlcyIsImV4dHJhY3Rpb25FcnJvciIsIkVycm9yIiwiZmlsZVJlY29yZCIsImluc2VydCIsImZpbGVuYW1lIiwiZmlsZV90eXBlIiwic3Vic3RyaW5nIiwiZmlsZV9zaXplIiwiY29udGVudCIsInNpbmdsZSIsImxpbmtFcnJvciIsIm5vdGVib29rX2lkIiwiZmlsZV9pZCIsImlkIiwiZXh0cmFjdGVkTGVuZ3RoIiwicHJldmlldyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/files/route.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/tr46","vendor-chunks/whatwg-url","vendor-chunks/webidl-conversions","vendor-chunks/underscore","vendor-chunks/mammoth","vendor-chunks/bluebird","vendor-chunks/jszip","vendor-chunks/xmlbuilder","vendor-chunks/pako","vendor-chunks/lop","vendor-chunks/readable-stream","vendor-chunks/@xmldom","vendor-chunks/inherits","vendor-chunks/dingbat-to-unicode","vendor-chunks/util-deprecate","vendor-chunks/string_decoder","vendor-chunks/safe-buffer","vendor-chunks/process-nextick-args","vendor-chunks/path-is-absolute","vendor-chunks/option","vendor-chunks/lie","vendor-chunks/immediate","vendor-chunks/core-util-is","vendor-chunks/base64-js"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ffiles%2Froute&page=%2Fapi%2Ffiles%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ffiles%2Froute.ts&appDir=D%3A%5CNeuroLearn%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CNeuroLearn&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();